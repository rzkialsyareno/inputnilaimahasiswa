<!DOCTYPE html>
<html lang="id">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>Portal Akademik - Lihat Data Mahasiswa</title>

        <!-- Bootstrap CSS -->
        <link
            href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css"
            rel="stylesheet" />

        <!-- Bootstrap Icons -->
        <link
            rel="stylesheet"
            href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.0/font/bootstrap-icons.css" />

        <!-- Custom CSS -->
        <link rel="stylesheet" href="css/style.css" />
    </head>
    <body>
        <div class="container mt-5">
            <header class="mb-4">
                <h1 class="text-center">
                    <i class="bi bi-mortarboard-fill"></i> Portal Akademik
                </h1>
                <nav class="nav justify-content-end">
                    <a class="nav-link" href="index.html">
                        <i class="bi bi-pencil-square"></i> Input Nilai
                    </a>
                    <a class="nav-link active" href="lihat-data.html">
                        <i class="bi bi-table"></i> Lihat Data Mahasiswa
                    </a>
                </nav>
            </header>

            <main>
                <!-- Alert Container di atas card -->
                <div id="alertContainer" class="mb-3"></div>

                <div class="card shadow-lg">
                    <div class="card-header bg-gradient-primary text-white">
                        <h2 class="card-title mb-0">
                            <i class="bi bi-file-earmark-text"></i> Data Nilai
                            Mahasiswa
                        </h2>
                    </div>
                    <div class="card-body">
                        <!-- Search Bar -->
                        <div class="mb-3">
                            <div class="input-group">
                                <span class="input-group-text">
                                    <i class="bi bi-search"></i>
                                </span>
                                <input
                                    type="text"
                                    class="form-control"
                                    id="searchInput"
                                    placeholder="Cari berdasarkan nama atau NIM..." />
                            </div>
                        </div>

                        <!-- Tabel Data Nilai -->
                        <div class="table-responsive">
                            <table
                                class="table table-hover table-striped align-middle">
                                <thead class="table-primary">
                                    <tr>
                                        <th width="50">No.</th>
                                        <th>Nama Lengkap</th>
                                        <th>NIM</th>
                                        <th>Mata Kuliah</th>
                                        <th width="100"
                                            class="text-center">Nilai</th>
                                    </tr>
                                </thead>
                                <tbody id="tabelNilai">
                                    <!-- Data akan dimuat dari JavaScript -->
                                    <tr>
                                        <td colspan="5"
                                            class="text-center text-muted">
                                            <div
                                                class="spinner-border spinner-border-sm"
                                                role="status">
                                                <span
                                                    class="visually-hidden">Loading...</span>
                                            </div>
                                            Memuat data...
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>

                        <!-- Info & Tombol Kembali -->
                        <div
                            class="d-flex justify-content-between align-items-center mt-4 pt-3 border-top">
                            <div class="info-badge">
                                <i
                                    class="bi bi-info-circle-fill text-primary"></i>
                                <span class="text-muted ms-2">
                                    Total: <strong class="text-primary"
                                        id="totalData">0</strong> data mahasiswa
                                </span>
                            </div>
                            <a href="index.html" class="btn btn-gradient-back">
                                <i class="bi bi-arrow-left-circle-fill"></i>
                                Kembali ke Input Nilai
                            </a>
                        </div>
                    </div>
                </div>
            </main>

            <!-- Footer -->
            <footer class="mt-5 text-center text-muted">
                <small>
                    &copy; 2025 Portal Akademik | Rekayasa Perangkat Lunak
                </small>
            </footer>
        </div>

        <!-- Bootstrap JS -->
        <script
            src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>

        <!-- Logic JS -->
        <script src="js/logic.js"></script>

        <!-- Search Functionality -->
        <script>
      document.addEventListener("DOMContentLoaded", function () {
        const searchInput = document.getElementById("searchInput");

        if (searchInput) {
          searchInput.addEventListener("keyup", function () {
            const filter = this.value.toLowerCase();
            const rows = document.querySelectorAll("#tabelNilai tr");

            rows.forEach((row) => {
              const text = row.textContent.toLowerCase();
              row.style.display = text.includes(filter) ? "" : "none";
            });
          });
        }

        // Update total data
        loadData().then((data) => {
          document.getElementById("totalData").textContent = data.length;
        });
      });
    </script>
    </body>
</html>
